plugins {
    id 'java'
    id 'org.jetbrains.intellij' version '1.2.0'
}

group 'cn.com.pism'
version new Date().format("yy.MM.dd.HHmm") + "-${PUBLISH}"

buildSearchableOptions.enabled = false


sourceCompatibility = JavaVersion.VERSION_1_8


allprojects {
    repositories {
        maven {
            url 'https://maven.aliyun.com/repository/public/'
        }
        mavenLocal()
        mavenCentral()
    }
}


repositories {
    mavenCentral()
}

dependencies {
    testImplementation group: 'junit', name: 'junit', version: '4.12'

    implementation 'com.alibaba:fastjson:1.2.78'
    implementation 'com.alibaba:druid:1.2.8'
    implementation 'cn.hutool:hutool-http:5.7.17'
    implementation 'org.apache.commons:commons-lang3:3.12.0'
    implementation 'commons-collections:commons-collections:3.2.2'
    compileOnly 'org.projectlombok:lombok:1.18.22'
    testCompileOnly 'org.projectlombok:lombok:1.18.22'
    annotationProcessor 'org.projectlombok:lombok:1.18.22'
    testAnnotationProcessor 'org.projectlombok:lombok:1.18.22'
}

// See https://github.com/JetBrains/gradle-intellij-plugin/
intellij {
    version = '2020.3.4'
    type = 'IU'
    plugins = [
            'com.intellij.database'
    ]
}
patchPluginXml {
    sinceBuild = '203'
    untilBuild = '213.*'
    changeNotes = """

<div color='red'>
<h1>$version</h1>

<ul>
<li>ADD Toolbar dynamic correction according to position</li>
<li>ADD Add dynamic color configuration, and color schemes can be shared quickly</li>
<li>OPT Change the default non enabled color configuration to the default enabled color configuration</li>
<li>OPT Optimization algorithm</li>
<li>OPT Formatting algorithm adapts #14</li>
<li>OPT Formatting algorithm adapts line feed parameters #18</li>
<li>OPT Modify the default color scheme</li>
<li>OPT Optimize color configuration interface</li>

<li>ADD 工具栏根据位置动态修正</li>
<li>ADD 添加颜色动态配置，配色方案可以快速分享</li>
<li>OPT 将默认不启用颜色配置改为默认启用颜色配置</li>
<li>OPT 算法优化</li>
<li>OPT 格式化算法适配 #14</li>
<li>OPT 格式化算法适配换行参数 #18</li>
<li>OPT 修改默认的配色方案</li>
<li>OPT 优化颜色配置UI</li>

</ul>
</div>


<h1>21.08.08.2003-TE</h1>

<ul>
<li>OPT 将默认不启用颜色配置改为默认启用颜色配置</li>
<li>OPT 算法优化</li>
<li>OPT 格式化算法适配 #14</li>
<li>OPT 格式化算法适配换行参数 #18</li>
<li>OPT 修改默认的配色方案</li>
<li>OPT 优化颜色配置UI</li>
<li>ADD 添加颜色动态配置，配色方案可以快速分享</li>
</ul>


<h1>21.07.04.1838-RE</h1>

<ul>
<li>ADD #15 print colored SQL</li>
<li>ADD #15 SQL color configuration</li>
<li>ADD add serial number</li>
<li>OPT ui beautification</li>
<li>ADD #15 打印有颜色的SQL</li>
<li>ADD #15 SQL颜色配置</li>
<li>ADD 添加序号</li>
<li>OPT UI美化</li>
</ul>


<h1>21.05.27.2253-RE</h1>

<ul>
<li>FIX some bugs</li>
<li>ADD One click beautification configuration</li>
<li>ADD Print at the end of SQL [;] semicolon</li>
<li>ADD Improve log format compatibility</li>
<li>OPT Some copywriting</li>
<li>OPT the display name of the toolWindow to reduce space consumption</li>
<li>FIX 一些bug</li>
<li>ADD 一键美化配置</li>
<li>ADD SQL末尾打印[;]分号</li>
<li>ADD 提高日志格式化兼容性</li>
<li>OPT 一些文案</li>
<li>OPT 工具栏显示名称，减少空间占用</li>
</ul>

<h1>21.03.14.0107-Release</h1>

<ul>
<li>Fix some bugs</li>
<li>ADD SQL desensitization configuration</li>
<li>ADD SQL beautification configuration</li>
<li>ADD SQL case conversion configuration</li>
<li>修复一些bug</li>
<li>新增 SQL脱敏配置</li>
<li>新增 SQL美化配置</li>
<li>新增 SQL大小写转换配置</li>
</ul>

<h1>21.01.13.2217-Release</h1>

<ul>
<li>Fix some bugs</li>
<li>Fix some data type parsing errors</li>
<li>Add issuse and document entry</li>
<li>修复一些bug</li>
<li>修复部分数据类型解析错误的问题</li>
<li>添加issuse和文档入口</li>
</ul>

<h1>21.01.07.1632-Release</h1>

<ul>
<li>Fix some bugs</li>
<li>Add [preparing:], [parameters:] configuration items</li>
<li>修复一些bug</li>
<li>添加[Preparing:],[Parameters:]配置项</li>
</ul>


<h1>20.12.31.0000-Release.HAPY.NEW.YEAR</h1>

<ul>
<li>Fix some bugs</li>
<li>Optimize console right click operation</li>
<li>Provide I18N support</li>
<li>修复一些bug</li>
<li>优化控制台右键操作</li>
<li>提供I18N支持</li>
</ul>

<h1>20.12.22.1520-Release</h1>

<ul>
<li>Fix some bugs</li>
<li>Fix compatibility issues</li>
<li>修复一些bug</li>
<li>修复兼容性问题</li>
</ul>

<h1>20.12.13.1659-Release</h1>

<ul>
<li>New SQL keyword coloring function (beta version)</li>
<li>New external log format support</li>
<li>Fix some bugs</li>
<li>Optimization of formatting algorithm</li>
<li>新增SQL关键字着色功能（beta 版）</li>
<li>新增外部日志格式化支持</li>
<li>修复部分bug</li>
<li>格式化算法优化</li>
</ul>

<h1>20.11.15.1902-Release</h1>

<ul>
<li>Add the function of copying SQL directly to the clipboard</li>
<li>添加SQL直接复制到剪贴板的功能</li>
</ul>

<h1>20.11.4.1935-Release</h1>

<ul>
<li>change url to github</li>
</ul>

<h1>20.11.4.0853-Release</h1>

<ul>
<li>Exchange Chinese and English description position</li>
<li>切换中文英文描述信息位置</li>
</ul>

<h1>20.11.3.0900-Release</h1>

<ul>
<li>Add English description information</li>
<li>添加英文描述信息</li>
</ul>

<h1>20.10.31.1131-Release</h1>

<ul>
<li>Select SQL log format output</li>
<li>Automatic monitoring SQL log formatted output</li>
<li>选取SQL日志格式化输出</li>
<li>自动监听SQL日志格式化输出</li>
</ul>
      """
}

tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}
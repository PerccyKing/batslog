plugins {
    id 'java'
    id 'org.jetbrains.intellij' version '0.5.0'
}

group 'cn.com.pism'
version '21.03.13.1550-Release'


java {
    sourceCompatibility JavaVersion.VERSION_1_8
    targetCompatibility JavaVersion.VERSION_1_8
}


allprojects {
    repositories {
        maven {
            url 'https://maven.aliyun.com/repository/public/'
        }
        mavenLocal()
        mavenCentral()
    }
}


repositories {
    mavenCentral()
}

dependencies {
    testCompile group: 'junit', name: 'junit', version: '4.12'

    implementation 'com.alibaba:fastjson:1.2.67'
    implementation 'com.alibaba:druid:1.1.9'
    implementation 'org.apache.commons:commons-lang3:3.11'
    implementation 'commons-collections:commons-collections:3.2.2'
    compileOnly 'org.projectlombok:lombok:1.18.12'
    testCompileOnly 'org.projectlombok:lombok:1.18.12'
    annotationProcessor 'org.projectlombok:lombok:1.18.12'
    testAnnotationProcessor 'org.projectlombok:lombok:1.18.12'
}

// See https://github.com/JetBrains/gradle-intellij-plugin/
intellij {
    version '2019.2'
    type 'IC'
    updateSinceUntilBuild false
}
patchPluginXml {
    changeNotes """

<div color='red'>
<h1>$version</h1>

<ul>
<li>Fix some bugs</li>
<li>Fix some data type parsing errors</li>
<li>Add issuse and document entry</li>
<li>修复一些bug</li>
<li>修复部分数据类型解析错误的问题</li>
<li>添加issuse和文档入口</li>
</ul>
</div>


<h1>21.01.13.2217-Release</h1>

<ul>
<li>Fix some bugs</li>
<li>Fix some data type parsing errors</li>
<li>Add issuse and document entry</li>
<li>修复一些bug</li>
<li>修复部分数据类型解析错误的问题</li>
<li>添加issuse和文档入口</li>
</ul>

<h1>21.01.07.1632-Release</h1>

<ul>
<li>Fix some bugs</li>
<li>Add [preparing:], [parameters:] configuration items</li>
<li>修复一些bug</li>
<li>添加[Preparing:],[Parameters:]配置项</li>
</ul>


<h1>20.12.31.0000-Release.HAPY.NEW.YEAR</h1>

<ul>
<li>Fix some bugs</li>
<li>Optimize console right click operation</li>
<li>Provide I18N support</li>
<li>修复一些bug</li>
<li>优化控制台右键操作</li>
<li>提供I18N支持</li>
</ul>

<h1>20.12.22.1520-Release</h1>

<ul>
<li>Fix some bugs</li>
<li>Fix compatibility issues</li>
<li>修复一些bug</li>
<li>修复兼容性问题</li>
</ul>

<h1>20.12.13.1659-Release</h1>

<ul>
<li>New SQL keyword coloring function (beta version)</li>
<li>New external log format support</li>
<li>Fix some bugs</li>
<li>Optimization of formatting algorithm</li>
<li>新增SQL关键字着色功能（beta 版）</li>
<li>新增外部日志格式化支持</li>
<li>修复部分bug</li>
<li>格式化算法优化</li>
</ul>

<h1>20.11.15.1902-Release</h1>

<ul>
<li>Add the function of copying SQL directly to the clipboard</li>
<li>添加SQL直接复制到剪贴板的功能</li>
</ul>

<h1>20.11.4.1935-Release</h1>

<ul>
<li>change url to github</li>
</ul>

<h1>20.11.4.0853-Release</h1>

<ul>
<li>Exchange Chinese and English description position</li>
<li>切换中文英文描述信息位置</li>
</ul>

<h1>20.11.3.0900-Release</h1>

<ul>
<li>Add English description information</li>
<li>添加英文描述信息</li>
</ul>

<h1>20.10.31.1131-Release</h1>

<ul>
<li>Select SQL log format output</li>
<li>Automatic monitoring SQL log formatted output</li>
<li>选取SQL日志格式化输出</li>
<li>自动监听SQL日志格式化输出</li>
</ul>
      """
}

tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}